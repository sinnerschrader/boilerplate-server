#!/usr/bin/env node
import minimist from 'minimist';
import winston from 'winston';

import build from '../lib/build';
import pkg from '../package';

async function start(config) {
	return await build(config);
}

start(Object.assign({}, minimist(process.argv.slice(2)), { pkg, winston }))
	.then(function(result){
		winston.debug(result);
		winston.info(`Build for ${pkg.name} executed successfully...`);
		process.exit(0);
	})
	.catch(function(err){
		winston.error(err);
		process.exit(1);
	});
